@tailwind base;
@tailwind components;
@tailwind utilities;

@media (max-width: 640px) {
  .btn-pixel { border-width: 3px; }
  .input-pixel { font-size: 14px; }
}

:root { background: #0b0811; }

@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600&display=swap');

/* === Effects & Glow === */
.pixel-shadow {
  text-shadow: 0 2px 0 rgba(0,0,0,0.6), 0 0 8px rgba(184,255,54,0.35);
}

.glow {
  filter: drop-shadow(0 0 8px rgba(255,140,26,0.6));
}

.neon {
  filter: drop-shadow(0 0 8px rgba(184,255,54,0.7));
}

.mag {
  filter: drop-shadow(0 0 8px rgba(255,56,209,0.6));
}

/* === Lore Glow === */
.lore-glow {
  text-shadow: 0 0 12px rgba(180, 255, 180, 0.35);
}

/* Subtle global flicker / heat */
.overlay-flicker {
  background:
    radial-gradient(70% 35% at 50% 0%, rgba(255, 216, 107, 0.05), rgba(0,0,0,0) 70%),
    radial-gradient(120% 80% at 50% 100%, rgba(255, 140, 26, 0.06), rgba(0,0,0,0) 60%);
  mix-blend-mode: screen;
  animation: overlayFlicker 2.6s ease-in-out infinite;
  opacity: 0.6;
}
@keyframes overlayFlicker {
  0%, 100% { filter: brightness(0.96); opacity: 0.55; }
  50%      { filter: brightness(1.06); opacity: 0.7; }
}

/* Embers: rise + drift + twinkle */
.ember {
  position: absolute;
  bottom: -8vh;
  border-radius: 9999px;
  background: radial-gradient(circle at 30% 30%, #ffd86b 0%, #ff6a00 60%, rgba(255,106,0,0) 70%);
  box-shadow:
    0 0 10px rgba(255, 180, 60, 0.55),
    0 0 18px rgba(255, 120, 0, 0.25);
  mix-blend-mode: plus-lighter;
  animation:
    emberRise linear infinite,
    emberDrift ease-in-out infinite,
    emberTwinkle ease-in-out infinite;
  opacity: 0.9;
}
@keyframes emberRise   { 0% { transform: translateY(0); } 100% { transform: translateY(-105vh); } }
@keyframes emberDrift  { 0%,100% { margin-left: 0px; } 50% { margin-left: 14px; } }
@keyframes emberTwinkle{ 0%,100% { filter: brightness(1); opacity: 0.8; } 50% { filter: brightness(1.35); opacity: 1; } }

@media (prefers-reduced-motion: reduce) {
  .overlay-flicker, .ember { animation: none !important; opacity: 0.5; }
}

/* === Layout & Components === */
.bg-dungeon {
  background-image: url('/img/torch_bg_4k.png');
  background-size: cover;
  background-position: center;
}

.card-border {
  border: 3px solid rgba(255,255,255,0.08);
  box-shadow: 0 0 0 2px rgba(255,56,209,0.3), inset 0 0 0 2px rgba(0,0,0,0.5);
}

.input-pixel {
  border: 3px solid rgba(255,255,255,0.2);
  background: rgba(10,8,17,0.8);
  color: #F3F0E8;
}

/* === Animated Button Glow === */
@keyframes goldPulse {
  0%, 100% { box-shadow: 0 0 10px rgba(217,164,65,0.3); }
  50% { box-shadow: 0 0 20px rgba(217,164,65,0.9); }
}

.btn-pixel {
  border: 4px solid #D9A441;
  animation: goldPulse 3s ease-in-out infinite;
}

.btn-pixel:hover {
  box-shadow: 0 0 14px rgba(217,164,65,0.9);
}

/* Smooth section snapping + mobile-safe height */
html { scroll-behavior: smooth; }

/* Use small-viewport units on mobile so 100vh doesn't hide under the URL bar */
.svh { min-height: 100svh; }

/* === Background Particle Float === */
@keyframes floatDrift {
  0%, 100% { transform: translateY(0px) translateX(0px); }
  50% { transform: translateY(-10px) translateX(5px); }
}

/* Apply to particle divs within .bg-dungeon sections */
.bg-dungeon .absolute.w-1.h-1 {
  animation: floatDrift 6s ease-in-out infinite;
}

/* === Accessibility helpers === */
:focus-visible { outline: 3px solid #B8FF36; outline-offset: 2px; }
.visually-hidden { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; }

/* Reduced motion safety */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
  html { scroll-behavior: auto; }
}